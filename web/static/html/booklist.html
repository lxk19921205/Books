{% extends "base_nav.html" %}
<!-- no need to set active_nav, it is passed in by server -->

{% block head_title %}{{title}}{% endblock %}

{% block head_less %}
	<link rel="stylesheet" type="text/less" href="/css/_book_full.less">
	<link rel="stylesheet" type="text/less" href="/css/booklist.less"/>
{% endblock head_less %}

{% block head_js %}
<!-- Nothing extra is needed -->
{% endblock head_js %}

{% block body_content_with_nav %}
	<!-- Place for BookList's information -->
	<div class="booklist">
		<div class="name">
			<h1>{{booklist.name}}</h1>
		</div>
		<div class="status">
			{% if booklist.is_importing() %}
			<h4>
				Importing : {{booklist.isbns|length}} / {{booklist.douban_amount}} ({{booklist.importing_progress()|round(2)}}%)
			</h4>
			{% else %}
			<h2>
				{% if booklist.isbns|length > 1 %}
					({{booklist.isbns|length}} books)
				{% elif booklist.isbns|length > 0 %}
					({{booklist.isbns|length}} book)
				{% endif %}
			</h2>
			{% endif %}
		</div>

		{% if booklist.note %}
		<h3>{{booklist.note}}</h3>
		{% endif %}
	</div>

	{% if books %}
	<!-- There are books in the datastore, show them! -->
	<div>
		{% for book in books %}
			{% include "_book_full.html" %}
		{% endfor %}
	</div>
	{% else %}
	<!-- No books fetched, consider importing from Douban? -->
	<section class="import_hint">
		{% if import_started %}
		<h1>Importing has started!</h1>
		<h3>It may take several minutes, refresh to see the loading progress.</h3>
		{% else %}
		<h1>No books here :(</h1>
		<h3>You may</h3>
		<ul>
			<li>
				Import from <img src="/img/douban.png" title="豆瓣"> and all following operations will sync to it.
				<form method="post">
					<button class="import_button">Import Now</button>
				</form>
			</li>
			<li><a href="/explore/random">
				Randomly explore some?
			</a></li>
		</ul>
		{% endif %}
	</section>
	{% endif %}
{% endblock body_content_with_nav %}

{% block body_js %}
<!-- No extra js code is needed
	<script type="text/javascript">
	</script>
-->
{% endblock body_js %}
